<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TPMAP</title>
    <style>
        body {
            background-color: #F4F4F4;
            font-family: sans-serif;
            padding-left: 20%;
            padding-right: 20%;
        }
        h1 {
            color: #225588;
        }
        h2 {
            color: #336699;
        }
        a {
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
    <body>

    <h1>Quick Start</h1>
    <p>Begin by pressing the "Import Protein Abundance" button located at the top to launch the import panel.</p>
    <p>&nbsp;</p>
    <h2>Import Panel</h2>
    <div><img src="import.png" alt="Import wizard" width="600px" /></div>
    <p>The import panel contains the following options for importing data.</p>
    <p style="padding-left: 30px;"><strong>Select Experiment Type</strong></p><p style="padding-left: 30px;">Choose between 1D and 2D thermal profiling data sets.</p>
    <p style="padding-left: 30px;"><strong>Select Input Format</strong></p><p style="padding-left: 30px;">Choose between either TP-MAP native format or Proteome Discoverer output with a configuration file. Format methods are described below.</p>
    <p style="padding-left: 30px;"><strong>Normalization Method</strong></p><p style="padding-left: 30px;">Choose between median normalization or no normalization on the data.</p>
    <p style="padding-left: 30px;"><strong>Data file / Configuration file</strong></p><p style="padding-left: 30px;">Load tab separated text files containing the data. For Proteome Discoverer format an additional configuration file is required to indicate temperature and concentration values associated with each sample and channel.</p>
    <p style="padding-left: 30px;"><strong>2D Bootstrap Analysis</strong></p><p style="padding-left: 30px;">Select checkbox to perform a bootstrap analysis for 2D data sets. The bootstrap analysis will permute the data for 1,000,000 iterations (by default) to empirically calculate p-values.</p>
    <p style="padding-left: 30px;"><strong>1D Curve Fitting</strong></p><p style="padding-left: 30px;">Select checkbox to perform curve fitting for 1D data sets. By default the software will attempt 100 times to successfully fit a curve and run the optimization algorithm for up to 10,000 iterations. Try increasing these values if curves are failing to converge.</p>
    <p style="padding-left: 30px;"><strong>Multithreading</strong></p><p style="padding-left: 30px;">Select checkbox to utilize all available threads/CPUs when performing the 2D bootstrap analysis or 1D curve fitting.</p>
    <p>&nbsp;</p>


    <h2>Input Format</h2>

    <p>TPMAP can import protein abundance levels either from TPMAP formatted tab-separated text files or from ProteomeDiscoverer output in combination with an additional configuration file in which temperature and concentration values are specified for respective TMT samples and channels.</p>
    <p>The native TPMAP formatted tabular text format should be formatted with headers labelled &ldquo;Accession&rdquo;, &ldquo;Description&rdquo;. If the &ldquo;Description&rdquo; is formatted in UniProtKB format, e.g.</p>
    <blockquote>
        <p>Db|UniqueIdentifier|EntryName ProteinName OS=OrganismName OX=OrganismIdentifier GN=GeneName PE=ProteinExistence SV=SequenceVersion</p>
    </blockquote>
    <p>Then the description column will be parsed to extract gene name, description, and organism.</p>
    <p>Additional columns with headers beginning with &ldquo;Ref_&rdquo; specify abundance values.</p>
    <p>For 1D experiments, the abundance headers should be of the form &ldquo;Ref_[Temperature]_[V/T Replicate]&rdquo;, where [Temperature] is replaced with respective temperature values in decimal format, and [V/T Replicate] is replaced with a string referring to vehicle/treatment&nbsp; and replicate number.</p>
    <p>For 2D experiments, abundance headers should be of the format &ldquo;Ref_[Temperature]_[Concentration]&rdquo;, where [Temperature] and [Concentration] are replaced with decimal values referring to temperature and concentration, respectively.</p>
    <p>Output from ProteomeDiscoverer can be imported into TPMAP using a configuration file that specifies respective concentration and temperature values for respective TMT samples and channels. The ProteomeDiscoverer output should be exported to a tab-separated text file with columns including &ldquo;Accession&rdquo;, &ldquo;Description&rdquo; and &ldquo;Abundances: [Sample], [Channel]&rdquo; where [Sample] and [Channel] are replaced with respective sample and channel identifiers.</p>
    <p>For importing Proteome Discoverer format, an additional tab-separated text configuration file should be provided containing four columns referring to sample, channel, temperature, and either replicate (1D) or concentration (2D). For example, for one sample (F1), ten channels (126-131), two temperatures (37 and 73) and 5 concentrations, the configuration file should be formatted as:</p>
    <p>&nbsp;</p>
    <table style="width: 180px; border: 1px solid black;">
        <tbody>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">126</td>
            <td style="width: 45px;">37</td>
            <td style="width: 45px;">50</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">127N</td>
            <td style="width: 45px;">37</td>
            <td style="width: 45px;">10</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">127C</td>
            <td style="width: 45px;">37</td>
            <td style="width: 45px;">1</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">128N</td>
            <td style="width: 45px;">37</td>
            <td style="width: 45px;">0.2</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">128C</td>
            <td style="width: 45px;">37</td>
            <td style="width: 45px;">0</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">129N</td>
            <td style="width: 45px;">73</td>
            <td style="width: 45px;">50</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">129C</td>
            <td style="width: 45px;">73</td>
            <td style="width: 45px;">10</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">130N</td>
            <td style="width: 45px;">73</td>
            <td style="width: 45px;">1</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">130C</td>
            <td style="width: 45px;">73</td>
            <td style="width: 45px;">0.2</td>
        </tr>
        <tr>
            <td style="width: 45px;">F1</td>
            <td style="width: 45px;">131</td>
            <td style="width: 45px;">73</td>
            <td style="width: 45px;">0</td>
        </tr>
        </tbody>
    </table>
    <p>The import panel can automatically generate a ProteomeDiscoverer configuration file given a ProteomeDiscoverer data file. Once loaded, ensure that experiment samples and channels align with the experimental conditions relevant to your experiment, for 2D this includes temperature values and concentration values, and for 1D this includes temperature values and replicates as shown below: </p>
    <div><img src="config.png" alt="Configuration file generator" width="600px" /></div>


    <p>&nbsp;</p>
    <h2>2D Thermal Profiling Analysis</h2>
    <p>&nbsp;</p>
    <p><img src="2danalysis.png" alt="2D Thermal Profiling Analysis" width="600px" /></p>
    <p>&nbsp;</p>
    <p>The analysis window contains a left panel displaying properties of the 2D thermal profiling data set, a central panel displaying a list of all proteins and the abundance-dependent thermal stability matrix when a protein is selected, and a right panel including options for down-stream analysis of selected proteins.</p>
    <p>The the central table listing all proteins contains the following columns:</p>
    <p style="padding-left: 30px;"><strong>Checkbox<br /></strong></p>
    <p style="padding-left: 30px;">The checkbox can be used to select proteins for downstream analysis (described below).</p>
    <p style="padding-left: 30px;"><strong>Accession, Gene, Organism, Description<br /></strong></p>
    <p style="padding-left: 30px;">Descriptors for each protein extracted from the input file.</p>
    <p style="padding-left: 30px;"><strong>Score</strong></p>
    <p style="padding-left: 30px;">The score ranges from +1 to -1, where +1 indicates that a protein is stabilized and -1 indicates that a protein is destabilized. By default, proteins are ranked by this metric from positive to negative, followed by Mean FC if two proteins have the same score. </p>
    <p style="padding-left: 30px;"><strong>Mean FC<br /></strong></p>
    <p style="padding-left: 30px;">Mean dose-dependent fold change of all values relative to the base concentration.</p>
    <p style="padding-left: 30px;"><strong>P Value<br /></strong></p>
    <p style="padding-left: 30px;">The probability of the score based on a bootstrap analysis of the data.</p>
    <p style="padding-left: 30px;"><strong>Effect</strong></p>
    <p style="padding-left: 30px;">Takes values of "Stabilized", "Destabilized" or "Solubility/Expression", depending on whether the observed effect is thermal stability (positive score), thermal destability (negative score), or if the effect can be explained by changes in solubility or expression (when change is observed at the lowest temperature).</p>
    <p style="padding-left: 30px;"><strong>MD</strong></p>
    <p style="padding-left: 30px;">The mean difference from the selected protein, calculated after initiating the mean difference analysis (described below).</p>
    <p>When a protein is selected, the lower segment displays a table showing all dose-dependent fold changes relative to the base concentration, which is colored with a gradient from green to yellow to red, indicating stability to destability, respectively.</p>
    <p>The filter box can be used to search all fields, and has support for common regular expressions.</p>
    <p>&nbsp;</p>

    <h2>1D Thermal Profiling Analysis</h2>
    <p>&nbsp;</p>
    <p><img src="1danalysis.png" alt="1D Thermal Profiling Analysis" width="600px" /></p>
    <p>&nbsp;</p>
    <p>The analysis window contains a left panel displaying properties of the 1D thermal profiling data set, a central panel displaying a list of all proteins and the temperature-dependent thermal stability matrix as well as melting curves when a protein is selected, and a right panel including options for down-stream analysis of selected proteins.</p>
    <p>The the central table listing all proteins contains the following columns:</p>
    <p style="padding-left: 30px;"><strong>Checkbox<br /></strong></p>
    <p style="padding-left: 30px;">The checkbox can be used to select proteins for downstream analysis (described below).</p>
    <p style="padding-left: 30px;"><strong>Accession, Gene, Organism, Description<br /></strong></p>
    <p style="padding-left: 30px;">Descriptors for each protein extracted from the input file.</p>
    <p style="padding-left: 30px;"><strong>Tm V1, V2, T1, T2 <br /></strong></p>
    <p style="padding-left: 30px;">Tm values calculated from the dose-response curves for Vehicle 1 and 2, and Treatment 1 and 2, respectively. This is the temperature at which 50% abundance is observed.</p>
    <p style="padding-left: 30px;"><strong>Tm shift V1T1, V2T2, V1V2, Mean Tm shift <br /></strong></p>
    <p style="padding-left: 30px;">TM shift calculated as change in Tm between vehicle 1 and treatment 1, vehicle 2 and treatment 2, vehicle 1 and vehicle 2, and mean vehicle and mean treatment, respectively.</p>
    <p style="padding-left: 30px;"><strong>RMSE V1, V2, T1, T2<br /></strong></p>
    <p style="padding-left: 30px;">Root mean squared error of the curve fit for Vehicle 1 and 2, and treatment 1 and 2, respectively. </p>
    <p style="padding-left: 30px;"><strong>Shift same direction<br /></strong></p>
    <p style="padding-left: 30px;">Boolean value, true if the shift from vehicle to treatment is the same for both replicates.</p>
    <p style="padding-left: 30px;"><strong>Delta VT > Delta VV</strong></p>
    <p style="padding-left: 30px;">Boolean value, true if the mean TM shift between vehicle and treatment is greater than the TM shift between two vehicles.</p>
    <p style="padding-left: 30px;"><strong>Score</strong></p>
    <p style="padding-left: 30px;">Score assessing the quality of the fit and TM shift, calculated as: <br /><br />Score = <em>weight</em> * ( Rank[Tm] ) + (1 - <em>weight</em>) * ( Rank[RMSE] + Rank[Rep]) <br/><br /> Where RankTm is a vector (TmVT1, TmVT2) containing the scaled rank between [0,1] of increasing thermal melting point shift between vehicle and treatment in the two replicates respectively, RankRMSE is a vector (RMSEV1, RMSEV2, RMSET1, RMSET2) containing the scaled rank between [0,1] in decreasing order of root mean squared error of vehicle replicates 1 and 2, and treatment replicates 1 and 2, respectively, and RankRep is a vector (RepV and RepT) containing the scaled rank between [0,1] of the mean difference between vehicle replicates and treatment replicates, respectively. A <em>weight</em> is used to shift the score to prioritise either Tm shift or curve fit quality metrics. By default the <em>weight</em> is set em 75% (see results) and can be changed interactively. The resultant score is then scaled to range from 0 to 10.</p>
    <p>&nbsp;</p>

    <h2>Downstream Analysis</h2>
    <p>The right panel includes downstream analysis methods, this includes:</p>
    <p style="padding-left: 30px;"><strong>Fold Change<br /></strong></p>
    <p style="padding-left: 30px;">By default TPMAP uses the 80% percentile of fold change (FC) above and below 1 to determine a threshold at which stability or destability is measured, respectively. The percentile at which the cutoff is determined can be altered using the sliders. The Recalculate button can be used to recalculate scores for proteins once a desired cutoff has been selected.</p>
    <p style="padding-left: 30px;"><strong>String Network Image<br /></strong></p>
    <p style="padding-left: 30px;">Proteins selected by a checkbox will be uploaded to the String server (<a href="https://www.string-db.org">https://www.string-db.org</a>) for analysis of protein-protein interactions among selected proteins. <em>Important</em>: The accession column must refer to UniProt identifiers for this function work work correctly.</p>
    <p style="padding-left: 30px;"><strong>String Functional Enrichment<br /></strong></p>
    <p style="padding-left: 30px;">Proteins selected by a checkbox will be uploaded to the String server (<a href="https://www.string-db.org">https://www.string-db.org</a>) for functional enrichment analysis among selected proteins. <em>Important</em>: The accession column must refer to UniProt identifiers for this function work work correctly.</p>
    <p style="padding-left: 30px;"><strong>UniProt Entry</strong></p>
    <p style="padding-left: 30px;">Load the UniProt pages for selected proteins. <em>Important</em>: The accession column must refer to UniProt identifiers for this function work work correctly.</p>
    <p style="padding-left: 30px;"><strong>Mean Difference<br /></strong></p>
    <p style="padding-left: 30px;">This will calculate the mean fold change difference from the highlighted protein to all other proteins, and rank proteins' from most similar to dissimilar.</p>
    <p style="padding-left: 30px;"><strong>Export Selected Proteins<br /></strong></p>
    <p style="padding-left: 30px;">Proteins selected by a checkbox can be exported to an Excel file or a tab-separated text file. If the "Expanded export" checkbox is ticked then the list will include the full dose-dependent fold change table for each protein.</p>
    <p>&nbsp;</p>
    </body>
</html>
